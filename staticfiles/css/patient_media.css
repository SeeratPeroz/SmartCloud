  /* Force full viewport width for OUR STL modal only */
  .stl-modal .modal-dialog {
    width: 100vw !important;
    max-width: 100vw !important;
    margin: 0 !important;
  }
  .stl-modal .modal-content {
    height: 100vh !important;
    border: 0;
    border-radius: 0;
  }
  .stl-modal .modal-body { padding: 0 !important; overflow: hidden; }



.img-thumb { cursor: zoom-in; }


/* STL modal: force true fullscreen width/height across BS4/BS5 */
.stl-modal .modal-dialog {
  width: 100vw !important;
  max-width: 100vw !important;
  margin: 0;                /* remove side margins */
}

.stl-modal .modal-content {
  height: 100vh;            /* full viewport height */
  border: 0;
  border-radius: 0;
}

.stl-modal .modal-body {
  padding: 0;
}

/* Optional: prevent Bootstrap from adding right padding when scrollbar hides */
.modal-open .modal {
  padding-right: 0 !important;
}

/* STL overlay controls (always visible on modal) */

.stl-controls{
  position:absolute; top:12px; right:12px; z-index:5;
  background:rgba(255,255,255,.95); border:1px solid #dee2e6; border-radius:12px;
  padding:10px 12px; display:flex; align-items:center; gap:10px; flex-wrap:wrap;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
}
.stl-controls label{ font-size:.8rem; color:#495057; margin:0; }
.stl-controls .color{
  appearance:none; width:36px; height:28px; border:1px solid #ced4da; border-radius:6px; padding:0; cursor:pointer;
}
.stl-controls input[type="range"]{ width:140px; }
.stl-controls .check{ display:flex; align-items:center; gap:.35rem; font-size:.85rem; color:#495057; }

/* Comments drawer/backdrop */
.comments-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:1064; opacity:0; pointer-events:none; transition:opacity .2s; }
.comments-backdrop.show{ opacity:1; pointer-events:auto; }
.comments-drawer{ position:fixed; top:0; right:-390px; width:380px; height:100vh; background:#fff; z-index:1066; box-shadow:-8px 0 24px rgba(0,0,0,.15); display:flex; flex-direction:column; transition:right .25s; }
.comments-drawer.open{ right:0; }
.comments-drawer .drawer-header{ padding:.75rem 1rem; border-bottom:1px solid #e9ecef; display:flex; align-items:center; justify-content:space-between; }
.comments-drawer .drawer-body{ padding:.75rem .75rem 0; overflow-y:auto; flex:1; }
.comments-drawer .drawer-footer{ border-top:1px solid #e9ecef; padding:.75rem; }

.msg{ display:flex; gap:.5rem; margin-bottom:.5rem; }
.msg .avatar{ width:36px; height:36px; border-radius:50%; object-fit:cover; flex:0 0 36px; }
.msg .bubble{ max-width:78%; padding:.5rem .65rem; border-radius:.75rem; background:#f4f6f8; }
.msg .meta{ font-size:.75rem; color:#6c757d; margin-top:.125rem; }
.msg.mine{ flex-direction:row-reverse; }
.msg.mine .bubble{ background:#e7f1ff; }
.msg.mine .meta{ text-align:right; }

/* Fullscreen image viewer */
#viewer.d-none{ display:none; }
#viewer{ position:fixed; inset:0; z-index:1060; display:flex; align-items:center; justify-content:center; }
#viewerBackdrop{ position:absolute; inset:0; background:rgba(0,0,0,.85); }
#viewerToolbar{ position:absolute; top:16px; right:16px; display:flex; gap:8px; border-radius:10px; background:#fff; padding:8px 10px; z-index:1062; box-shadow:0 6px 18px rgba(0,0,0,.25); }
#viewerImg{
  position:relative; z-index:1061;
  max-width:calc(100vw - 64px); max-height:calc(100vh - 112px);
  width:auto; height:auto; object-fit:contain;
  transform:translate(var(--tx,0px),var(--ty,0px)) scale(var(--s,1));
  cursor:grab; user-select:none; will-change:transform;
}
#viewer.grabbing #viewerImg{ cursor:grabbing; }

/* TUI fullscreen modal tweaks */
.modal-fullscreen .modal-body{ padding:0; }
#tui-editor-wrap{ height:calc(100vh - 120px); }
.tui-image-editor-header-buttons .tui-image-editor-load-btn{ display:none!important; }
